import std::IO;
import std::Type;
import std::OS;
import std::TIME;
import std::IOEXT;

import snake::Snake;

class Main
{
	public static main()
	{
		OS.system("cls");
		snake->Snake = new Snake();
		
		L->int = 0;
		R->int = 80;
		
		T->int = 0;
		B->int = 20;
		
		OS.srand(TIME.time());

		offX->int = 0;
		offY->int = 0;
		
		while(true)
		{
			OS.system("cls");

			a->int = IOEXT.key('A');
			d->int = IOEXT.key('D');
			w->int = IOEXT.key('W');
			s->int = IOEXT.key('S');

			if(a != 0 && d != 0)
			{
				offX = 0;
			}
			else if(a != 0)
			{
				offX = -1;
			}
			else if(d != 0)
			{
				offX = 1;
			}
			else
			{
				offX = 0;
			}

			if(w != 0 && s != 0)
			{
				offY = 0;
			}
			else if(w != 0)
			{
				offY = -1;
			}
			else if(s != 0)
			{
				offY = 1;
			}
			else
			{
				offY = 0;
			}
			
			if(offX != 0 || offY != 0)
			{
				x->int = snake.getX() + offX;
				y->int = snake.getY() + offY;

				if(L <= x && x <= R && T <= y && y <= B )
				{
					snake.move(x, y);
				}
			}
				
			snake.update();
			co_yield null;
		}
		
	}
}